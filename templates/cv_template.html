<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>CV de {{ data.personal_info['name'] }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style2.css') }}">
</head>
<body>
<div class="cv-container">

    <!-- Header avec photo et infos -->
    <header>
        {% if data.personal_info['photo_filename'] %}
        <table>
            <tr>
                <td style="width: 100px;">
                    <img src="{{ url_for('static', filename='uploads/' + data.personal_info['photo_filename']) }}" alt="Photo de profil" style="max-width: 100px; height: auto; border: 1px solid #ccc;">
                </td>
                <td style="padding-left: 20px; vertical-align: top;">
                    <h1>{{ data.personal_info['name'] }}</h1>
                    <p><strong>{{ data.personal_info['phone'] }}</strong></p>
                    <p>{{ data.personal_info['email'] }}</p>
                    <p><a href="{{ data.personal_info['linkedin'] }}">{{ data.personal_info['linkedin'] }}</a></p>
                </td>
            </tr>
        </table>
        {% else %}
        <div style="text-align: left;">
            <h1>{{ data.personal_info['name'] }}</h1>
            <p><strong>{{ data.personal_info['phone'] }}</strong></p>
            <p>{{ data.personal_info['email'] }}</p>
            <p><a href="{{ data.personal_info['linkedin'] }}">{{ data.personal_info['linkedin'] }}</a></p>
        </div>
        {% endif %}
    </header>




    <hr>

    {% if data.skills %}
    <h2>Compétences</h2>
    <ul>
        {% for skill in data.skills %}
        <li>{{ skill }}</li>
        {% endfor %}
    </ul>
    <hr>
    {% endif %}

    {% if data.languages %}
    <h2>Langues</h2>
    <ul>
        {% for lang in data.languages %}
        <li><strong>{{ lang.name }}</strong> :
            {% if lang.speak %}Parlé {% endif %}
            {% if lang.read %}Lu {% endif %}
            {% if lang.write %}Écrit{% endif %}
        </li>
        {% endfor %}
    </ul>
    <hr>
    {% endif %}

    {% if data.education %}
    <h2>Éducation</h2>
    {% for edu in data.education %}
    <p>
        <strong>{{ edu.degree }}</strong> – {{ edu.school }} <br>
        {{ edu.start_year }} {% if edu.in_progress %}– en cours{% else %}– {{ edu.end_year }}{% endif %}
        {% if edu.courses %}
        <ul>
            {% for course in edu.courses %}
            {% if course %}<li>{{ course }}</li>{% endif %}
            {% endfor %}
        </ul>
        {% endif %}
        {% if edu.thesis_subject %}
        <p><strong>Mémoire :</strong> {{ edu.thesis_subject }}</p>
        <p><strong>Encadreur(s) :</strong> {{ edu.thesis_supervisors }}</p>
        {% endif %}
    </p>
    {% endfor %}
    <hr>
    {% endif %}

    {% if data.experiences %}
    <h2>Expériences professionnelles</h2>
    {% for exp in data.experiences %}
    <p>
        <strong>{{ exp.title }}</strong> – {{ exp.company }} ({{ exp.location }})<br>
        {{ exp.type }} — {{ exp.start_date }} {% if exp.current %}à aujourd'hui{% else %}– {{ exp.end_date }}{% endif %}<br>
        {% if exp.description %}
        <ul>
            {% for task in exp.description.split('\n') %}
                {% if task.strip() %}
                <li>{{ task.strip() }}</li>
                {% endif %}
            {% endfor %}
        </ul>
        {% endif %}




        {% if exp.ref_name and exp.ref_contact %}
        <strong>Référence :</strong> {{ exp.ref_name }} — {{ exp.ref_contact }}
        {% endif %}
    </p>
    {% endfor %}
    <hr>
    {% endif %}

    {% if data.distinctions %}
    <h2>Distinctions & Projets</h2>
    {% for item in data.distinctions %}
    <p>
        <strong>{{ item.title }}</strong> – {{ item.year }}<br>
        <em>{{ item.type }}</em><br>
        {% if item.description %}{{ item.description }}{% endif %}
    </p>
    {% endfor %}
    <hr>
    {% endif %}

    {% if data.certifications %}
    <h2>Certifications</h2>
    {% for cert in data.certifications %}
    <p>
        <strong>{{ cert.name }}</strong> – {{ cert.issuer }}{% if cert.year %}, {{ cert.year }}{% endif %}<br>
        {% if cert.link %}
        <a href="{{ cert.link }}" target="_blank">{{ cert.link }}</a>
        {% endif %}
    </p>
    {% endfor %}
    {% endif %}

</div>
</body>
</html>
