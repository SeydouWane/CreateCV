<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>CV Moderne - {{ data.personal_info.name | default('Candidat') }}</title>
  <style>
    /* VARIABLES/ACCENT */
    :root {
      --primary-color: #1F2937; /* Texte principal */
      --secondary-color: #4B5563; /* Gris pour les sous-titres */
      --accent-color: #059669; /* Vert √©meraude moderne */
      --accent-bg: #ECFDF5; /* Fond tr√®s clair pour la colonne */
      --text-subtle: #9CA3AF; /* Gris tr√®s clair pour les dates */
    }

    /* BASE */
    body {
      font-family: Arial, sans-serif; 
      margin: 0;
      font-size: 10pt;
      color: var(--primary-color);
      line-height: 1.5;
    }
    a {
      color: var(--accent-color);
      font-size: 9pt;
      text-decoration: none;
    }

    /* STRUCTURE DE COLONNE */
    .container {
      width: 100%;
      display: flex;
    }
    .left-column {
      width: 33%; /* 1/3 de la page */
      background-color: var(--accent-bg);
      padding: 30px 20px 30px 30px;
      height: 100%; /* S'assurer qu'elle s'√©tend sur toute la hauteur */
      border-right: 2px solid var(--accent-color);
    }
    .right-column {
      width: 67%; /* 2/3 de la page */
      padding: 30px 30px 30px 40px;
    }

    /* EN-T√äTES ET TITRES */
    h1 { 
      font-size: 26pt; 
      margin: 0 0 5px 0; 
      color: var(--primary-color);
      font-weight: 900;
    }
    .job-title {
        font-size: 14pt;
        color: var(--secondary-color);
        margin-bottom: 20px;
    }
    h2 {
      font-size: 13pt;
      margin-top: 20px;
      margin-bottom: 8px;
      color: var(--accent-color);
      font-weight: bold;
      border-bottom: 1px solid var(--accent-color);
      padding-bottom: 2px;
    }
    h3 {
      font-size: 10pt;
      margin: 10px 0 0 0;
      color: var(--primary-color);
      font-weight: bold;
    }
    .meta {
      font-size: 9pt;
      color: var(--text-subtle);
      margin: 0 0 5px 0;
    }
    
    /* LISTES & BLOCS */
    ul { 
      padding-left: 15px; 
      margin: 4px 0 10px 0; 
      list-style-type: disc;
    }
    li { 
      margin-bottom: 3px; 
      font-size: 9pt;
    }
    p { margin: 2px 0; font-size: 9pt; }
    
    /* ICONES SIMUL√âES */
    .icon::before {
        content: attr(data-icon);
        color: var(--accent-color);
        margin-right: 5px;
        font-weight: bold;
        display: inline-block;
        width: 15px; /* Pour aligner */
    }
  </style>
</head>
<body>

<div class="container">
    
    <div class="left-column">
        
        <div style="margin-bottom: 25px;">
            {% if data.personal_info.photo_path %}
            <img src="{{ data.personal_info.photo_path }}" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid var(--accent-color); margin-bottom: 15px;">
            {% endif %}

            <p class="icon" data-icon="üìû" style="margin-top: 10px;">{{ data.personal_info.phone }}</p>
            <p class="icon" data-icon="üìß">{{ data.personal_info.email }}</p>
            {% if data.personal_info.linkedin %}
            <p class="icon" data-icon="üîó"><a href="{{ data.personal_info.linkedin }}">LinkedIn</a></p>
            {% endif %}
        </div>
        
        {% if data.skills %}
        <h2>Comp√©tences Techniques</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            {% for skill in data.skills %}
            <li style="margin-bottom: 5px;">
                <span style="font-weight: bold; color: var(--primary-color);">{{ skill }}</span>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        
        {% if data.languages %}
        <h2>Langues</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            {% for lang in data.languages %}
            <li>
                <span style="font-weight: bold;">{{ lang.name }}</span>
                {% set levels = [] %}
                {% if lang.speak %}{% set levels = levels + ['Parl√©'] %}{% endif %}
                {% if lang.read %}{% set levels = levels + ['Lu'] %}{% endif %}
                {% if lang.write %}{% set levels = levels + ['√âcrit'] %}{% endif %}
                <span class="meta">({{ levels | join(', ') }})</span>
            </li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if data.certifications %}
        <h2>Certifications</h2>
        <ul style="list-style-type: none; padding-left: 0;">
          {% for cert in data.certifications %}
          <li style="margin-bottom: 10px;">
            <p style="font-weight: bold; margin-bottom: 0;">{{ cert.title }}</p>
            <p class="meta">{{ cert.issuer }} ({{ cert.year }})</p>
          </li>
          {% endfor %}
        </ul>
        {% endif %}
        
    </div>
    
    <div class="right-column">
        
        <header style="margin-bottom: 30px;">
            <h1>{{ data.personal_info.name | upper }}</h1>
            <p class="job-title">Votre titre ou profession principale</p>
        </header>

        {% if data.experiences %}
        <h2>Exp√©riences</h2>
        {% for exp in data.experiences | reverse %}
          <div style="margin-bottom: 15px;">
            <h3>{{ exp.title }} <span style="color: var(--accent-color);">@ {{ exp.company }}</span></h3>
            <p class="meta">{{ exp.type }} | {{ exp.start_date }} {% if exp.current %}‚Äì Aujourd‚Äôhui{% else %}‚Äì {{ exp.end_date }}{% endif %} | {{ exp.location }}</p>
            <ul>
              {% for task in exp.description.split('\n') %}
                {% if task.strip() %}<li>{{ task.strip() | replace('-', '') }}</li>{% endif %}
              {% endfor %}
            </ul>
          </div>
        {% endfor %}
        {% endif %}
        
        {% if data.education %}
        <h2>Formation</h2>
        {% for edu in data.education | reverse %}
          <div style="margin-bottom: 15px;">
            <h3>{{ edu.degree }} <span style="color: var(--accent-color);">@ {{ edu.school }}</span></h3>
            <p class="meta">{{ edu.start_year }} {% if edu.in_progress %}‚Äì En cours{% else %}‚Äì {{ edu.end_year }}{% endif %}</p>
            
            {% if edu.courses | select('string') | list %}
            <p style="font-size: 9pt; margin-top: 5px;">Mati√®res principales : {{ edu.courses | join(', ') }}</p>
            {% endif %}
            
            {% if edu.thesis_subject %}
            <p style="margin: 5px 0 0 0; font-size: 9pt; font-style: italic;">M√©moire : {{ edu.thesis_subject }}</p>
            {% endif %}
          </div>
        {% endfor %}
        {% endif %}
        
        {% if data.distinctions %}
        <h2>Projets & R√©alisations</h2>
        <ul>
          {% for item in data.distinctions %}
          <li>
            <span style="font-weight: bold;">{{ item.title }}</span> ({{ item.year }}) - 
            <span class="meta">{{ item.type }}</span>
            {% if item.description %}: {{ item.description }}{% endif %}
          </li>
          {% endfor %}
        </ul>
        {% endif %}

    </div>
</div>

<footer style="font-size: 7pt; text-align: center; color: #aaa; padding-top: 15px; border-top: 1px dashed #eee;">
  CV g√©n√©r√© automatiquement - {{ data.personal_info.name }} le {{ today | default('Date') }}
</footer>

</body>
</html>
