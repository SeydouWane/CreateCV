{% extends 'base.html' %}

{% block content %}

<!-- En-tÃªte : Photo + infos perso -->
<div style="display: flex; align-items: flex-start; margin-bottom: 20px;">
    {% if data.personal_info['photo_filename'] %}
        <div style="margin-right: 20px;">
            <img src="{{ url_for('static', filename='uploads/' + data.personal_info['photo_filename']) }}" alt="Photo professionnelle" width="100">
        </div>
    {% endif %}

    <div>
        <h2 style="margin-top: 0;">{{ data.personal_info['name'] }}</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            <li><strong>Email :</strong> {{ data.personal_info['email'] }}</li>
            <li><strong>TÃ©lÃ©phone :</strong> {{ data.personal_info['phone'] }}</li>
            <li><strong>LinkedIn :</strong> {{ data.personal_info['linkedin'] }}</li>
        </ul>
    </div>
</div>

<hr>

<!-- Langues -->
{% if data.languages %}
<h3>Langues</h3>
<ul>
    {% for lang in data.languages %}
    <li>
        <strong>{{ lang.name }}</strong> :
        {% if lang.speak %} ParlÃ© {% endif %}
        {% if lang.read %} Lu {% endif %}
        {% if lang.write %} Ã‰crit {% endif %}
    </li>
    {% endfor %}
</ul>
<hr>
{% endif %}

<!-- CompÃ©tences -->
{% if data.skills %}
<h3>CompÃ©tences</h3>
<ul>
    {% for skill in data.skills %}
    <li>{{ skill }}</li>
    {% endfor %}
</ul>
<hr>
{% endif %}

<!-- Ã‰ducation -->
{% if data.education %}
<h3>Ã‰ducation</h3>
<ul>
    {% for edu in data.education %}
    <li style="margin-bottom: 15px;">
        <strong>{{ edu.degree }}</strong> â€“ {{ edu.school }} ({{ edu.start_year }}{% if edu.in_progress %} â€“ en cours{% else %} â€“ {{ edu.end_year }}{% endif %})
        {% if edu.courses %}
        <ul>
            {% for course in edu.courses %}
                {% if course %}<li>{{ course }}</li>{% endif %}
            {% endfor %}
        </ul>
        {% endif %}
    </li>
    {% endfor %}
</ul>
<hr>
{% endif %}

<!-- ExpÃ©riences professionnelles -->
{% if data.experiences %}
<h3>ExpÃ©riences professionnelles</h3>
<ul>
    {% for exp in data.experiences %}
    <li style="margin-bottom: 15px;">
        <strong>{{ exp.title }}</strong> â€“ {{ exp.company }} ({{ exp.location }})<br>
        <span>{{ exp.type }} â€“ {{ exp.start_date }} {% if exp.current %}â€“ Aujourd'hui{% else %}â€“ {{ exp.end_date }}{% endif %}</span>
        {% if exp.description %}
        <div><em>{{ exp.description }}</em></div>
        {% endif %}
        {% if exp.ref_name and exp.ref_contact %}
        <div><strong>RÃ©fÃ©rence :</strong> {{ exp.ref_name }} â€” {{ exp.ref_contact }}</div>
        {% endif %}
    </li>
    {% endfor %}
</ul>
<hr>
{% endif %}

<!-- TÃ©lÃ©chargement PDF -->
<div style="text-align: center; margin-top: 30px;">
    <a href="/generate_cv">
        <button style="padding: 10px 20px; font-size: 16px;">ðŸ“„ TÃ©lÃ©charger le CV en franÃ§ais</button>
    </a>
    <a href="/generate_cv_en">
        <button style="padding: 10px 20px; font-size: 16px; margin-left: 10px;">ðŸ“„ Download CV in English</button>
    </a>
</div>

{% endblock %}
